@{
}
<div class="container-fluid py-4">
    <div class="row justify-content-center">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-white py-3">
                    <h5 class="m-0 font-weight-bold text-primary">Quản lý Chân trang</h5>
                </div>
                <div class="card-body">
                    <form id="footerForm">
                        <!-- Thông tin liên hệ -->
                        <div class="mb-4">
                            <h6 class="font-weight-bold text-primary mb-3">Thông tin liên hệ</h6>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-map-marker-alt text-primary me-2"></i>Địa chỉ</label>
                                <input type="text" class="form-control" id="address" name="address" value="Số 1 Đường 30/4, Phú Mỹ, Thủ Dầu Một, Bình Dương">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-phone text-primary me-2"></i>Số điện thoại</label>
                                <input type="text" class="form-control" id="telephone" value="(0274) 3567 899" name="telephone">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-envelope text-primary me-2"></i>Email</label>
                                <input type="email" class="form-control" id="Email" value="info@myphuochospital.com" name="Email">
                            </div>
                        </div>

                        <!-- Links Thông tin chung -->
                        <div class="mb-4">
                            <h6 class="font-weight-bold text-primary mb-3">Links Thông tin chung</h6>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-info-circle text-primary me-2"></i>Link Giới thiệu</label>
                                <input type="text" class="form-control" id="Linkgt" value="#" name="Linkgt">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-bullseye text-primary me-2"></i>Link Tầm nhìn & Sứ mệnh</label>
                                <input type="text" class="form-control" id="linktn" value="#" name="linktn">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-user-md text-primary me-2"></i>Link Đội ngũ bác sĩ</label>
                                <input type="text" class="form-control" id="linkdnbs" value="#" name="linkdnbs">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-briefcase text-primary me-2"></i>Link Tuyển dụng</label>
                                <input type="text" class="form-control" id="linktd" value="#" name="linktd">
                            </div>
                        </div>

                        <!-- Links Dịch vụ -->
                        <div class="mb-4">
                            <h6 class="font-weight-bold text-primary mb-3">Links Dịch vụ</h6>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-stethoscope text-primary me-2"></i>Link Khám bệnh</label>
                                <input type="text" class="form-control" id="linkkb" value="#" name="linkkb" >
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-flask text-primary me-2"></i>Link Xét nghiệm</label>
                                <input type="text" class="form-control" id="linkxn" value="#" name="linkxn">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-x-ray text-primary me-2"></i>Link Chẩn đoán hình ảnh</label>
                                <input type="text" class="form-control" id="linkcdha" value="#" name="linkcdha">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-procedures text-primary me-2"></i>Link Nội trú</label>
                                <input type="text" class="form-control" id="linknt" value="#" name="linknt">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fas fa-building text-primary me-2"></i>Link Khám doanh nghiệp</label>
                                <input type="text" class="form-control" id="linkdn" value="#" name="linkdn">
                            </div>
                        </div>

                        <!-- Mạng xã hội -->
                        <div class="mb-4">
                            <h6 class="font-weight-bold text-primary mb-3">Links Mạng xã hội</h6>
                            <div class="form-group mb-3">
                                <label><i class="fab fa-facebook-f text-primary me-2"></i>Facebook</label>
                                <input type="text" class="form-control" id="linkface" value="#" name="linkface">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fab fa-twitter text-info me-2"></i>Twitter</label>
                                <input type="text" class="form-control" id="linktwiter" value="#" name="linktwiter">
                            </div>
                            <div class="form-group mb-3">
                                <label><i class="fab fa-youtube text-danger me-2"></i>Youtube</label>
                                <input type="text" class="form-control" id="linkyoutube" value="#" name="linkyoutube">
                            </div>
                        </div>
                    </form>

                        <button type="button" class="btn btn-primary" id="btnluu">
                            <i class="fas fa-save me-2"></i>Lưu thay đổi
                        </button>
              
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
               hienthifooter()
            // Xử lý hiển thị tên file khi chọn logo
            $('#footerLogo').on('change', function(e) {
                var fileName = $(this).val().split('\\').pop();
                $(this).next('.custom-file-label').html(fileName);

                // Preview logo
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function(e) {
                        $('#logoPreview').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });

            // Xử lý submit form
            $('#footerForm').on('submit', function(e) {
                e.preventDefault();
                
                // Hiển thị thông báo thành công
                Swal.fire({
                    icon: 'success',
                    title: 'Lưu thành công!',
                    text: 'Các thay đổi đã được cập nhật',
                    showConfirmButton: false,
                    timer: 1500
                });
            });

               $('#btnluu').on('click', function(e) {
                e.preventDefault();
                editfooter();
                
            });
        });
        function hienthifooter() {
            $.ajax({
                url: '/Pagemain/GetFooter', // Đường dẫn API
                type: 'GET', // Phương thức HTTP
                success: function(response) {
                    // Cập nhật các trường dữ liệu
                    if (response.success) {
                        console.log(response.data);
                        // Không set value cho input file
                        $('#logoPreview').attr('src', response.data.logo ? '/Uploads/' + response.data.logo : '');
                        $('#address').val(response.data.address || '');
                        $('#telephone').val(response.data.telephone || '');
                        $('#Email').val(response.data.email || '');
                        $('#linkgt').val(response.data.Linkgt || '');
                        $('#linktn').val(response.data.linktn || '');
                        $('#linkdnbs').val(response.data.linkdnbs || '');
                        $('#linktd').val(response.data.linktd || '');
                        $('#linkkb').val(response.data.linkkb || '');
                        $('#linkxn').val(response.data.linkxn || '');
                        $('#linkcdha').val(response.data.linkcdha || '');
                        $('#linknt').val(response.data.linknt || '');
                        $('#linkdn').val(response.data.linkdn || '');
                        $('#linkface').val(response.data.linkface || '');
                        $('#linktwiter').val(response.data.linktwiter || '');
                        $('#linkyoutube').val(response.data.linkyoutube || '');
                    } else {
                        console.error('Dữ liệu trả về từ API không hợp lệ.');
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Lỗi khi gọi API:', error);
                }
            });
        }
        function editfooter(){
            var formData = new FormData($('#footerForm')[0]);
            $.ajax({
                url: '/Pagemain/EditFooter',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Cập nhật thành công!',
                        text: 'Các thay đổi đã được cập nhật',
                    });
                },
                error: function(xhr, status, error) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Có lỗi xảy ra!',
                        text: 'Có lỗi xảy ra',
                    });
                }
            });
        }
    </script>
}
